<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>React Intro</title>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
        />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    </head>
    <body>
        <div class="container">
            <div id="root"></div>
        </div>
        <script
            crossorigin
            src="https://unpkg.com/react@18/umd/react.development.js"
        ></script>

        <script
            crossorigin
            src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
        ></script>
        <script
            crossorigin
            src="https://unpkg.com/babel-standalone@6/babel.js"
        ></script>

        <script type="text/babel">
            function Poke() {
                const [loading, setLoading] = React.useState(true)
                const [name, setName] = React.useState("N/A")
                const [frontShiny, setFrontShiny] = React.useState(null)
                const [front, setFront] = React.useState(null)
                const [abilities, setAbilities] = React.useState([])

                const [isShiny, setIsShiny] = React.useState(false)

                var url = "https://pokeapi.co/api/v2/pokemon/ditto"

                React.useEffect(function () {
                    console.log("useEffect")

                    fetch(url).then(function (results) {
                        console.log(results)
                        results
                            .json()
                            .then(function (data) {
                                console.log(data.abilities)
                                console.log(data.sprites.front_shiny)
                                setName(data.name)
                                setAbilities(data.abilities)
                                setFront(data.sprites.front_default)
                                setFrontShiny(data.sprites.front_shiny)
                            })
                            .catch(function (e) {
                                console.log(e)
                            })
                            .finally(function () {
                                setLoading(false)
                            })
                    })
                }, [])

                setInterval(() => {
                    setIsShiny((shiny) => {
                        return !shiny
                    }, 1000)
                }, [])

                if (loading) {
                    return <div>Loading...</div>
                } else {
                    return (
                        <div>
                            Pokemon: {name}
                            <img
                                alt="{name}"
                                title={name}
                                src={isShiny ? frontShiny : front}
                                onClick={() => {
                                    setIsShiny(!isShiny)
                                }}
                            />
                            {abilities.map((item) => {
                                return (
                                    <div>
                                        {item.ability.name}
                                        <pre>
                                            {JSON.stringify(item, null, 2)}
                                        </pre>
                                    </div>
                                )
                            })}
                        </div>
                    )
                }
            }

            function HowMnaySeconds(props) {
                var daysOld = props.days * 24 * 60 * 60
                return <strong>{daysOld} days old</strong>
            }

            function HowMnayDays(props) {
                var daysOld = props.years * 365
                return (
                    <strong>
                        {daysOld} days old. <HowMnaySeconds days={daysOld} />
                    </strong>
                )
            }

            function HelloWorld(props) {
                const [count, setCount] = React.useState(0)

                return (
                    <div
                        className="card hoverable"
                        onClick={function () {
                            setCount(count + 1)
                        }}
                    >
                        <div class="card-content">
                            <span class="card-title">
                                Hello World, {props.name}!({count})
                            </span>
                            <p>
                                I am {props.age} years old
                                <br />
                                <HowMnayDays years={props.age} />
                            </p>
                        </div>
                    </div>
                )
            }

            function Carousel() {
                return (
                    <div class="carousel">
                        <a class="carousel-item" href="#one!">
                            <img src="https://lorempixel.com/250/250/nature/1" />
                        </a>
                        <a class="carousel-item" href="#two!">
                            <img src="https://lorempixel.com/250/250/nature/2" />
                        </a>
                        <a class="carousel-item" href="#three!">
                            <img src="https://lorempixel.com/250/250/nature/3" />
                        </a>
                        <a class="carousel-item" href="#four!">
                            <img src="https://lorempixel.com/250/250/nature/4" />
                        </a>
                        <a class="carousel-item" href="#five!">
                            <img src="https://lorempixel.com/250/250/nature/5" />
                        </a>
                    </div>
                )
            }

            document.addEventListener("DOMContentLoaded", function () {
                var elems = document.querySelectorAll(".carousel")
                var instances = M.Carousel.init(elems)
            })

            function ShinyArray() {
                const randomNo = Math.round(Math.random() * 1000)
                const url =
                    "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/shiny/" +
                    randomNo +
                    ".png"
                const images = []

                for (var i = 0; i < 10; i++) {
                    const randomNo = Math.round(Math.random() * 1000)
                    images.push(
                        "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/shiny/" +
                            randomNo +
                            ".png"
                    )
                }

                const mainImg = images.pop()

                return (
                    <div>
                        {images.map((u, index) => {
                            return (
                                <img
                                    src={u}
                                    title={index}
                                    style={{ width: index % 2 ? 32 : 64 }}
                                />
                            )
                        })}
                        <img
                            src={mainImg}
                            style={{ width: Math.round(Math.random() * 250) }}
                        />
                    </div>
                )
            }

            function KStateTrip() {
                const [gasCost, setGasCost] = React.useState(3.33)
                const [totalMileage, setTotalMileage] = React.useState(240)
                const [vehicles, setVehicles] = React.useState([
                    { mileage: 8 },
                    { mileage: 15 },
                    { mileage: 12 },
                    { mileage: 24 },
                ])

                const [totalCost, setTotalCost] = React.useState(0)

                React.useEffect(() => {
                    let total = 0
                    vehicles.forEach((item) => {
                        var vehicleCost =
                            (totalMileage / item.mileage) * gasCost
                        total = total + vehicleCost
                    })
                    setTotalCost(total)
                }, [gasCost, totalMileage, vehicles])

                return (
                    <div
                        style={{
                            maxWidth: 200,
                            margin: 8,
                            backgroundColor: "#ff4",
                        }}
                    >
                        <input
                            type="number"
                            value={gasCost}
                            onChange={(e) => setGasCost(Number(e.target.value))}
                        />
                        <input
                            type="number"
                            value={totalMileage}
                            onChange={(e) =>
                                setTotalMileage(Number(e.target.value))
                            }
                        />
                        <p>
                            <strong>Total Coust: {totalCost}</strong>
                        </p>
                        Add Vehicle:
                        <input
                            type="number"
                            onInput={(e) => {
                                var v = vehicles
                                v.push({ mileage: e.target.value })
                                setVehicles([...v])
                            }}
                        />
                        <pre>
                            {JSON.stringify(
                                {
                                    gasCost,
                                    totalMileage,
                                    vehicles,
                                },
                                null,
                                2
                            )}
                        </pre>
                    </div>
                )
            }

            ReactDOM.render(
                <div>
                    <nav>
                        <div class="nav-wrapper">
                            <a href="#" class="brand-logo">
                                Interactive
                            </a>
                            <ul
                                id="nav-mobile"
                                class="right hide-on-med-and-down"
                            >
                                <li>
                                    <a href="sass.html">Sass</a>
                                </li>
                                <li>
                                    <a href="badges.html">Components</a>
                                </li>
                                <li>
                                    <a href="collapsible.html">JavaScript</a>
                                </li>
                            </ul>
                        </div>
                    </nav>

                    <ShinyArray />
                    <KStateTrip />
                    <Poke />

                    <HelloWorld name="jer" age="46" />
                    <HelloWorld name="je2r" age="4" />
                    <HelloWorld name="je3r" age="6" />

                    {/*<Carousel />*/}
                </div>,
                document.getElementById("root")
            )
        </script>
    </body>
</html>
